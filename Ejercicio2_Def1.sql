USE ej2_empleados;

CREATE USER IF NOT EXISTS albert IDENTIFIED BY 'sesame';
CREATE USER IF NOT EXISTS role2 IDENTIFIED BY 'sesame';
CREATE USER IF
CREATE USER IF
NOT
NOT
EXISTS
EXISTS
jim IDENTIFIED BY 'sesame';
alberto@localhost IDENTIFIED BY 'sesame';
-- create the roles
CREATE ROLE IF NOT EXISTS developer, manager, user;
-- grant privileges to the developer role
GRANT ALL ON*.* TO developer WITH GRANT OPTION;
-- grant privileges to the manager role
GRANT SELECT, INSERT, UPDATE, DELETE ON ap.* TO manager WITH GRANT OPTION;
-- grant privileges to user role
GRANT SELECT, INSERT, UPDATE, DELETE ON ej2_empleados.EMPLEADO TO user;
GRANT SELECT, INSERT, UPDATE, DELETE ON ej2_empleados.DEPARTAMENTO TO user;
GRANT SELECT, INSERT, UPDATE, DELETE ON ej2_empleados.PROYECTO TO user;
GRANT SELECT ON ej2_empleados.LOCALIZACIONES_DPTO accounts TO user;
GRANT SELECT ON ap.terms TO user;
-- assign users to roles
GRANT developer TO alberto@localhost;
GRANT manager TO jim;
GRANT user TO albert, role2;
-- set default roles for users
SET DEFAULT ROLE developer TO joel@localhost;
SET DEFAULT ROLE manager TO jim;
SET DEFAULT ROLE user TO albert, jane;


INSERT INTO  EMPLEADO VALUES (888665555,'Eduardo', 'Ochoa', 'Paredes', '10-11-1937', 'Las Peñas, 1', 'H', 55000, NULL, NULL);

INSERT INTO  DEPARTAMENTO VALUES (1,'Sede Central', 888665555, '19-06-1981');
UPDATE EMPLEADO SET DNO=1 WHERE DNI=888665555;

INSERT INTO  DEPARTAMENTO VALUES (5,'Investigación', NULL, '22-05-1968');
INSERT INTO  DEPARTAMENTO VALUES (4,'Administración' , NULL, '01-01-1995');

INSERT INTO EMPLEADO VALUES (333445555,'Alberto', 'Campos', 'Sastre',  '08-12-1955', 'Avda, Ríos, 9', 'H', 40000, 888665555, 5);
INSERT INTO EMPLEADO VALUES (987654321,'Juana', 'Sainz', 'Oreja', '20-06-1941', 'Cerquillas, 67', 'M', 43000, 888665555, 4);
INSERT INTO EMPLEADO VALUES (123456789, 'José', 'Pérez', 'Pérez','01-09-1965', 'Eloy I, 98', 'H', 30000, 333445555, 5);
INSERT INTO EMPLEADO VALUES (666884444,'Fernando', 'Ojeda','Ordonez','15-09-1962','Portillo sn','H',38000, 333445555,5);
INSERT INTO EMPLEADO VALUES (453453453, 'Aurora', 'Oliva', 'Avezuela', '31-07-1972', 'Antón, 6', 'M', 25000, 333445555, 5);
INSERT INTO EMPLEADO VALUES (999887777, 'Alicia', 'Jiménez', 'Celaya', '12-05-1968', 'Gran Via,38', 'M', 25000, 987654321, 4);
INSERT INTO EMPLEADO VALUES (987987987, 'Luis', 'Pajares', 'Morera','29-03-1969', 'Enebros, 90', 'H', 25000, 987654321, 4);

UPDATE DEPARTAMENTO SET DniDirector=333445555 WHERE NumeroDpto=5;
UPDATE DEPARTAMENTO SET DniDirector=987654321 WHERE NumeroDpto=4;

INSERT INTO  LOCALIZACIONES_DPTO VALUES (1, 'Madrid');
INSERT INTO  LOCALIZACIONES_DPTO VALUES (4, 'Gijón');
INSERT INTO  LOCALIZACIONES_DPTO VALUES (5, 'Valencia');
INSERT INTO  LOCALIZACIONES_DPTO VALUES (5, 'Sevilla');
INSERT INTO  LOCALIZACIONES_DPTO VALUES (5, 'Madrid');

INSERT INTO PROYECTO VALUES (1, 'ProductoX',  'Valencia', 5);
INSERT INTO PROYECTO VALUES (2, 'ProductoY',  'Sevilla', 5);
INSERT INTO PROYECTO VALUES (3, 'ProductoZ',  'Madrid', 5);
INSERT INTO PROYECTO VALUES (10, 'Computación',  'Gijon', 5);
INSERT INTO PROYECTO VALUES (20, 'Reorganización',  'Madrid', 5);
INSERT INTO PROYECTO VALUES (30, 'Comunicaciones',  'Gijón', 5);

INSERT INTO TRABAJA_EN VALUES (123456789, 1 , 32.5);
INSERT INTO TRABAJA_EN VALUES (123456789, 2 , 7.5);
INSERT INTO TRABAJA_EN VALUES (666884444, 3 , 40.0);
INSERT INTO TRABAJA_EN VALUES (453453453, 1 , 20.0);
INSERT INTO TRABAJA_EN VALUES (453453453, 2 , 20.0);
INSERT INTO TRABAJA_EN VALUES (333445555, 2 , 10.0);
INSERT INTO TRABAJA_EN VALUES (333445555, 3 , 10.0);
INSERT INTO TRABAJA_EN VALUES (333445555, 10 , 10.0);
INSERT INTO TRABAJA_EN VALUES (333445555, 20 , 10.0);
INSERT INTO TRABAJA_EN VALUES (999887777, 30 , 30.0);
INSERT INTO TRABAJA_EN VALUES (999887777, 10 , 10.0);
INSERT INTO TRABAJA_EN VALUES (987987987, 10 , 35.0);
INSERT INTO TRABAJA_EN VALUES (987987987, 30 , 5.0);
INSERT INTO TRABAJA_EN VALUES (987654321, 30 , 20.0);
INSERT INTO TRABAJA_EN VALUES (987654321, 20 , 15.0);
INSERT INTO TRABAJA_EN VALUES (888665555, 20 , NULL);

INSERT INTO SUBORDINADO VALUES (333445555, 'Alicia' , 'M', '05-04-1986', 'Hija');
INSERT INTO SUBORDINADO VALUES (333445555, 'Teodoro' , 'H', '25-10-1983', 'Hija');
INSERT INTO SUBORDINADO VALUES (333445555, 'Luisa' , 'M', '03-05-1958', 'Esposa');
INSERT INTO SUBORDINADO VALUES (987654321, 'Alfonso' , 'H', '28-02-1942', 'Esposo');
INSERT INTO SUBORDINADO VALUES (123456789, 'Miguel' , 'H', '04-01-1988', 'Hijo');
INSERT INTO SUBORDINADO VALUES (123456789, 'Alicia' , 'M', '30-12-1988', 'Hija');
INSERT INTO SUBORDINADO VALUES (123456789, 'Elisa' , 'M', '05-05-1967', 'Esposa');